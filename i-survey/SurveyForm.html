<!DOCTYPE html>
<html lang="ms">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Plus Jakarta Sans', sans-serif; background-color: #001a4d; background-image: radial-gradient(circle at 2px 2px, rgba(255,255,255,0.05) 1px, transparent 0); background-size: 40px 40px; background-attachment: fixed; }
    .card-premium { background: rgba(255, 255, 255, 0.98); box-shadow: 0 40px 80px -15px rgba(0, 0, 0, 0.8); border: 1px solid rgba(255,255,255,0.1); }
    .bg-royal-blue { background-color: #002366; }
    .ios-modal { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px); border-radius: 20px; }
    [x-cloak] { display: none !important; }
  </style>
</head>
<body x-data="surveyApp()" class="antialiased overflow-x-hidden text-slate-900">

  <div class="fixed top-0 left-0 w-full z-[100] bg-white/10 h-1.5">
    <div class="h-full bg-yellow-400 shadow-[0_0_20px_#facc15] transition-all duration-700" :style="'width: ' + (step/4)*100 + '%'"></div>
  </div>

  <div x-show="showAlert" x-cloak class="fixed inset-0 z-[2000] flex items-center justify-center p-6 bg-black/60 backdrop-blur-sm">
    <div class="ios-modal w-full max-w-[280px] text-center shadow-2xl p-6">
      <h3 class="text-lg font-bold text-black" x-text="alertTitle"></h3>
      <p class="mt-2 text-sm text-gray-600 leading-snug" x-text="alertMsg"></p>
      <button @click="showAlert = false" class="mt-6 w-full py-3 border-t border-gray-200 text-blue-600 font-bold text-lg active:bg-gray-50 rounded-b-xl">OK</button>
    </div>
  </div>

  <main class="min-h-screen flex items-center justify-center py-12 px-4">
    <div x-show="step === 1" class="w-full max-w-6xl">
      <div class="flex flex-col lg:flex-row rounded-[3.5rem] overflow-hidden card-premium">
        <div class="hidden lg:flex lg:w-1/2 bg-royal-blue p-12 flex-col justify-between text-white relative">
          <div class="relative z-10">
            <img src="https://raw.githubusercontent.com/imenhub-portal/imenhub-portal.github.io/main/i-survey/logo-header-2-2.png" class="h-20 w-auto mb-8 object-contain">
            <h2 class="text-5xl font-extrabold leading-tight">Menerajui Inovasi<br>Mikro & Nano.</h2>
          </div>
          <p class="text-lg opacity-80 italic font-light relative z-10">"Membangun kepakaran masa depan untuk teknologi termaju negara."</p>
        </div>
        <div class="w-full lg:w-1/2 p-8 md:p-16 flex flex-col justify-center text-center lg:text-left">
          <h1 class="text-2xl md:text-3xl font-black text-slate-900 leading-tight mb-6">Kajian Kebolehpasaran Program Pengajian</h1>
          <p class="text-slate-600 mb-10 text-sm">Institut Kejuruteraan Mikro dan Nanoelektronik (IMEN) komited untuk memastikan kurikulum kami relevan dengan keperluan industri.</p>
          <button @click="step = 2" class="w-full bg-royal-blue text-white py-5 rounded-2xl font-bold text-lg shadow-xl hover:bg-blue-900 transition-all">Mula Soal Selidik &rarr;</button>
        </div>
      </div>
    </div>

    <div x-show="step === 2" x-cloak class="w-full max-w-2xl">
      <div class="card-premium rounded-[3rem] p-8 md:p-12">
        <h2 class="text-2xl font-black text-royal-blue mb-8">Profil Responden</h2>
        <div class="space-y-6">
          <div><label class="text-xs font-bold text-slate-400 uppercase ml-2">E-mel Rasmi *</label><input type="email" x-model="formData.email" class="w-full p-4 bg-slate-50 rounded-2xl outline-none focus:ring-2 focus:ring-blue-900/20 font-bold text-slate-700 transition"></div>
          <div><label class="text-xs font-bold text-slate-400 uppercase ml-2">Nama Penuh (Pilihan)</label><input type="text" x-model="formData.nama" class="w-full p-4 bg-slate-50 rounded-2xl outline-none focus:ring-2 focus:ring-blue-900/20 font-bold text-slate-700 transition"></div>
          <div>
            <label class="text-xs font-bold text-slate-400 uppercase ml-2 mb-2 block">Kategori Umur *</label>
            <div class="grid grid-cols-2 gap-2">
              <template x-for="age in ['20-30 tahun', '30-40 tahun', '40-50 tahun', '50-60 tahun']">
                <button @click="formData.umur = age" :class="formData.umur === age ? 'bg-royal-blue text-white shadow-lg' : 'bg-slate-50 text-slate-500'" class="p-3 rounded-xl text-xs font-bold transition" x-text="age"></button>
              </template>
            </div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div><label class="text-xs font-bold text-slate-400 uppercase ml-2">Pekerjaan *</label><select x-model="formData.pekerjaan" class="w-full p-4 bg-slate-50 rounded-2xl outline-none font-bold text-xs"><option value="">Sila Pilih</option><template x-for="j in jobs"><option :value="j" x-text="j"></option></template></select></div>
            <div><label class="text-xs font-bold text-slate-400 uppercase ml-2">Sektor *</label><select x-model="formData.sektor" class="w-full p-4 bg-slate-50 rounded-2xl outline-none font-bold text-xs"><option value="">Sila Pilih</option><template x-for="s in sectors"><option :value="s" x-text="s"></option></template></select></div>
          </div>
        </div>
        <div class="mt-10 flex gap-4">
          <button @click="step = 1" class="flex-1 py-4 text-slate-400 font-bold rounded-xl">Kembali</button>
          <button @click="validateStep2" class="flex-[2] bg-royal-blue text-white py-4 rounded-2xl font-bold shadow-lg">Seterusnya</button>
        </div>
      </div>
    </div>

    <div x-show="step === 3" x-cloak class="w-full max-w-5xl">
       <div class="mb-6 px-4 text-center md:text-left"><h2 class="text-3xl font-black text-white">Penilaian Program</h2></div>
       <div class="space-y-8 pb-24">
        <template x-for="(q, i) in questions" :key="i">
          <div class="card-premium rounded-[2.5rem] p-8 md:p-10">
            <div class="flex gap-4 mb-6">
              <span class="w-10 h-10 rounded-xl bg-royal-blue text-white flex items-center justify-center font-bold text-sm shrink-0 shadow-lg" x-text="i+6"></span>
              <p class="text-sm md:text-base font-bold text-slate-800 leading-relaxed text-justify" x-text="q"></p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-4">
              <template x-for="prog in ['sarjana', 'phd']">
                <div class="p-5 bg-slate-50 rounded-2xl border border-slate-100">
                  <span class="text-[10px] font-black text-royal-blue uppercase block mb-3 opacity-60" x-text="prog === 'sarjana' ? 'Sarjana Sains' : 'Doktor Falsafah'"></span>
                  <div class="flex gap-1">
                    <template x-for="opt in ratings">
                      <button @click="formData.ratings[i][prog] = opt" :class="formData.ratings[i][prog] === opt ? 'bg-royal-blue text-white shadow-md scale-105' : 'bg-white text-slate-400 border'" class="flex-1 py-3 rounded-lg text-[9px] font-black transition-all" x-text="opt"></button>
                    </template>
                  </div>
                </div>
              </template>
            </div>
          </div>
        </template>
      </div>
      <div class="fixed bottom-0 left-0 w-full bg-white/90 backdrop-blur-md p-4 z-50 md:static md:bg-transparent">
        <div class="max-w-md mx-auto flex gap-4">
          <button @click="step = 2" class="flex-1 py-4 text-slate-400 font-bold md:text-white">Kembali</button>
          <button @click="validateStep3" class="flex-[3] bg-royal-blue text-white py-4 rounded-2xl font-black shadow-xl">Hampir Siap</button>
        </div>
      </div>
    </div>

    <div x-show="step === 4" x-cloak class="w-full max-w-2xl">
      <div class="card-premium rounded-[3rem] p-8 md:p-12 space-y-8">
        <h3 class="font-bold text-royal-blue text-lg text-center">13. Adakah anda berhasrat mencadangkan program ini? *</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
          <template x-for="prog in ['sarjana', 'phd']">
            <div class="p-6 bg-slate-50 rounded-3xl border border-slate-100 text-center">
              <span class="text-[10px] font-black text-royal-blue uppercase block mb-4" x-text="prog === 'sarjana' ? 'Sarjana Sains' : 'Doktor Falsafah'"></span>
              <div class="flex gap-2 justify-center">
                <template x-for="ans in ['Ya', 'Tidak', 'Mungkin']">
                  <button @click="formData['syor_'+prog] = ans" :class="formData['syor_'+prog] === ans ? 'bg-royal-blue text-white shadow-lg' : 'bg-white text-slate-400 border'" class="px-4 py-3 rounded-xl text-xs font-bold transition-all" x-text="ans"></button>
                </template>
              </div>
            </div>
          </template>
        </div>
        <textarea x-model="formData.cadangan" class="w-full p-6 bg-slate-50 rounded-3xl h-32 outline-none" placeholder="Cadangan anda (Pilihan)"></textarea>
        <div class="flex gap-4">
          <button @click="step = 3" class="flex-1 text-slate-400 font-bold">Kembali</button>
          <button @click="submitSurvey" :disabled="loading" class="flex-[3] bg-yellow-400 text-royal-blue py-5 rounded-2xl font-black text-lg">
            <span x-show="!loading">HANTAR</span><span x-show="loading">...</span>
          </button>
        </div>
      </div>
    </div>

    <div x-show="submitted" x-cloak class="fixed inset-0 z-[4000] bg-royal-blue flex flex-col items-center justify-center p-12 text-center">
      <div class="w-24 h-24 bg-white/10 rounded-full flex items-center justify-center mb-8 animate-bounce">
        <svg class="w-12 h-12 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="4" d="M5 13l4 4L19 7"></path></svg>
      </div>
      <h2 class="text-3xl font-black text-white mb-4">Terima Kasih!</h2>
      <button @click="window.location.reload()" class="px-8 py-3 bg-white text-royal-blue font-bold rounded-full shadow-lg">Hantar Baharu</button>
    </div>
  </main>

  <script>
    function surveyApp() {
      return {
        step: 1, loading: false, submitted: false, showAlert: false, alertTitle: '', alertMsg: '',
        formData: { email: '', nama: '', umur: '', pekerjaan: '', sektor: '', ratings: Array(7).fill().map(() => ({ sarjana: '', phd: '' })), syor_sarjana: '', syor_phd: '', cadangan: '' },
        jobs: ['Kerajaan', 'Swasta', 'Sendiri', 'Pelajar', 'Alumni', 'Ibu bapa', 'Tidak bekerja'],
        sectors: ['Pendidikan', 'Utilliti', 'Perubatan', 'R&D', 'Pembuatan', 'Automotif', 'IT'],
        ratings: ['Sangat baik', 'Baik', 'Sederhana', 'Lemah'],
        questions: ['Adakah program ini merangkumi teoritikal asas?', 'Adakah ia menambah kemahiran praktikal?', 'Adakah ia berkesan bagi penyelidikan?', 'Adakah ia membangunkan kemahiran insaniah?', 'Adakah ia meningkatkan kebolehan digital?', 'Adakah ia relevan kepada industri?', 'Adakah ia meningkatkan kebolehpasaran?'],
        
        triggerAlert(t, m) { this.alertTitle = t; this.alertMsg = m; this.showAlert = true; },
        validateStep2() { if(!this.formData.email || !this.formData.umur || !this.formData.pekerjaan) return this.triggerAlert("Info Diperlukan", "Sila lengkapkan maklumat wajib (*)"); this.step = 3; window.scrollTo(0,0); },
        validateStep3() { for(let i=0; i<7; i++) if(!this.formData.ratings[i].sarjana || !this.formData.ratings[i].phd) return this.triggerAlert("Belum Selesai", "Sila beri penilaian bagi setiap soalan."); this.step = 4; window.scrollTo(0,0); },
        
        async submitSurvey() {
          if(!this.formData.syor_sarjana || !this.formData.syor_phd) return this.triggerAlert("Syor Diperlukan", "Sila pilih jawapan bagi soalan 13.");
          this.loading = true;
          
          const sub = { ...this.formData };
          this.formData.ratings.forEach((r, i) => { 
            sub['q'+(i+1)+'_sarjana'] = r.sarjana; 
            sub['q'+(i+1)+'_phd'] = r.phd; 
          });

          // API Link to Google Apps Script
          const scriptURL = "https://script.google.com/macros/s/AKfycbzob3lrSW6lW3tze_xTX8Meg3PnWBOtywXiqcX1Z4kqyWyP4_xKdUL8-5ekZvaOLgJ6/exec";

          try {
            await fetch(scriptURL, {
              method: 'POST',
              mode: 'no-cors',
              headers: { 'Content-Type': 'application/json' },
              body: JSON.stringify(sub)
            });
            this.loading = false;
            this.submitted = true;
          } catch (e) {
            this.loading = false;
            this.triggerAlert("Ralat", "Gagal menghantar data.");
          }
        }
      }
    }
  </script>
</body>
</html>
